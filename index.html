<html>
<head>
	<title>particularly particles editor</title>
	<meta charset="utf-8">
</head>
<body>

	<style>
	body {
		width: 100%;
		height: 100%;
		margin: 0;
		overflow: hidden;
	}

	editor {
		float: left;
		position: absolute;
		display: block;
		border: 1px solid black;
		height: 100%;
		width: 50%;
	}

	preview {
		position: absolute;
		display: block;
		border: 1px solid black;
		height: 100%;
		width: 50%;
		left: 50%;
		background: orange;
	}

	#preview {
		height: 100%;
		width: 100%;
	}

	container {
		display: block;
		width: 100%;
		height: 100%;
	}

	#status {
		display: block;
		position: absolute;
		bottom: 0;
		color: red;
		width: 100%;
		left: 0;
		background: black;
		display: block;
		border-top: 1px solid white;
	}
	</style>

	<link rel="stylesheet" href="libs/codemirror.css">
	<link rel="stylesheet" href="libs/monokai.css">
	<script src="libs/codemirror.js"></script>
	<script src="libs/javascript.js"></script>
	<script src="libs/acorn.js"></script>

	<script>

		var codemirror;
		var delay, status;

		window.addEventListener('load', init);

		function init() {
			status_pane = document.getElementById('status');

			codemirror = CodeMirror( document.querySelector('editor'), {
				value: '',
				lineNumbers: true,
				matchBrackets: true,
				indentWithTabs: true,
				tabSize: 4,
				indentUnit: 4
			} );
			codemirror.setOption( 'theme', 'monokai' );
			codemirror.on( 'change', function () {

				clearTimeout( delay );
				delay = setTimeout( function () {

					var code = codemirror.getValue();

					try {
						acorn.parse(code);

						status_pane.innerHTML = '';
					} catch (e) {
						
						var loc = e.loc;

						status_pane.innerHTML = 'Error on line ' + loc.line + ' column ' + loc.column;

						console.log('Error on line ' + loc.line + ' column ' + loc.column);
					}

				}, 300 );

			});

		}
		function update() {

		}

		function reload() {

		}

	</script>

	<container>
		<editor>
			<div id="status">Status: </div>
		</editor>

		<preview>
			<iframe id="preview" src="about:none"></iframe>
		</preview>
	</container>
</body>
</html>
